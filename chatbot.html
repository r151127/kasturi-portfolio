<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Virtual_Kasturi Chatbot</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f4f4f4; padding: 20px; }
    #chat { background: white; border: 1px solid #ccc; border-radius: 6px; padding: 10px; max-width: 600px; margin: auto; }
    .message { margin: 10px 0; }
    .user { font-weight: bold; }
    .bot { background: #e1f5fe; padding: 8px; border-radius: 4px; }
    #input { width: 80%; padding: 10px; }
    #send { padding: 10px; }
  </style>
</head>
<body>
  <div id="chat">
    <div class="message bot">Hi! I'm Virtual_Kasturi. Ask me anything about my professional experience.</div>
  </div>
  <input id="input" placeholder="Type your question..."/>
  <button id="send">Send</button>

  <script>
    const apiKey = "AIzaSyAxGWHLYdlDbPRrmINeXyDzqcrvTIRRq_Y";
    const systemPrompt = `You are Virtual_Kasturi, my personal AI Portfolio Assistant. Behavior rules: 1. Always speak in first person as if you are me (Kasturi). 2. Use a warm, professional, concise tone. 3. When asked any question, reply in 2–3 sentences maximum. 4. Invite the user to ask for more details if they wish. 5. Only expand to 5 sentences if the user asks for more. 6. Never dump all information at once. 7. When describing experience or skills, prioritize my consolidated project summaries. 8. If you don't have enough information, say: "I'm sorry, I don’t have that information right now."`;

    const input = document.getElementById("input");
    const send = document.getElementById("send");
    const chat = document.getElementById("chat");

    send.onclick = async () => {
      const userMessage = input.value;
      if (!userMessage) return;

      // Show user message
      const userDiv = document.createElement("div");
      userDiv.className = "message user";
      userDiv.textContent = "You: " + userMessage;
      chat.appendChild(userDiv);

      input.value = "";

      // Call Gemini API
      const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=" + apiKey, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          contents: [{
            role: "user",
            parts: [{ text: systemPrompt + "\nUser question: " + userMessage }]
          }]
        })
      });

      const data = await response.json();
      const botMessage = data.candidates?.[0]?.content?.parts?.[0]?.text || "Sorry, I couldn't generate a response.";

      // Show bot message
      const botDiv = document.createElement("div");
      botDiv.className = "message bot";
      botDiv.textContent = botMessage;
      chat.appendChild(botDiv);
    };
  </script>
</body>
</html>
